{% extends "reservas/base.html" %}

{% block content %}

  {% if messages %}
    <div class="container mt-3">
      {% for message in messages %}
        <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
<div class="container mt-5">
    
<h2 class="mb-4">Editar Reserva</h2>

<div class="card mb-4">
  <div class="card-body">
    <div class="row">
  {% for img in reserva.habitacion.imagenes.all %}
    <div class="col-md-4 mb-3">
      <img src="{{ img.imagen.url }}" class="img-fluid rounded" alt="Imagen de habitación">
    </div>
  {% empty %}
    <p class="text-muted">No hay imágenes disponibles para esta habitación</p>
  {% endfor %}
</div>

    <p><strong>Habitación:</strong> {{ reserva.habitacion.numero }}</p>
    <p><strong>Categoría:</strong> {{ reserva.habitacion.get_categoria_display }}</p>
    <p><strong>Precio por noche:</strong> ${{ reserva.habitacion.precio_diario }}</p>
    <p><strong>Equipamiento:</strong> {{ reserva.habitacion.equipamiento }}</p>
  </div>
</div>

<form method="post" class="needs-validation" novalidate>
  {% csrf_token %}
  
  <div class="mb-3">
    <label for="id_fecha_inicio" class="form-label">Fecha de inicio</label>
    {{ form.fecha_inicio }}
  </div>
  
  <div class="mb-3">
    <label for="id_fecha_fin" class="form-label">Fecha de fin</label>
    {{ form.fecha_fin }}
  </div>

  {% if form.non_field_errors %}
    <div class="alert alert-danger">
        {{ form.non_field_errors }}
    </div>
  {% endif %}

  <button type="submit" class="btn btn-success">Guardar Cambios</button>
  <a href="{% url 'mis_reservas' %}" class="btn btn-secondary">Volver a mis reservas</a>
</form>
</div>

{% endblock %}